{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/batman/Workspace/Eatofy/src/app/hotel/%28dashboard%29/backup/page.js"],"sourcesContent":["'use client'\n\nimport { useEffect, useState } from 'react';\nimport { ArrowDownTrayIcon, CheckCircleIcon } from '@heroicons/react/24/outline';\nimport customersCrud from '@/app/offline/crud/Customers';\nimport menusCrud from '@/app/offline/crud/Menus';\nimport menuCategoryCrud from '@/app/offline/crud/MenuCategory';\nimport sectionsCrud from '@/app/offline/crud/Sections';\nimport tablesCrud from '@/app/offline/crud/Tables';\nimport staffsCrud from '@/app/offline/crud/Staffs';\nimport { toast, ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nexport default function BackupPage() {\n  const [pendingBackups, setPendingBackups] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  // Check for pending backups on component mount\n  useEffect(() => {\n    checkPendingBackups();\n  }, []);\n\n  const checkPendingBackups = async () => {\n    setIsLoading(true);\n    try {\n      const backupChecks = await Promise.all([\n        customersCrud.checkPendingBackups(),\n        menusCrud.checkPendingBackups(),\n        menuCategoryCrud.checkPendingBackups(),\n        sectionsCrud.checkPendingBackups(),\n        tablesCrud.checkPendingBackups(),\n        staffsCrud.checkPendingBackups()\n      ]);\n\n      const pending = [];\n      \n      if (backupChecks[0].length > 0) pending.push({ type: 'Customers', count: backupChecks[0].length });\n      if (backupChecks[1].length > 0) pending.push({ type: 'Menus', count: backupChecks[1].length });\n      if (backupChecks[2].length > 0) pending.push({ type: 'Menu Categories', count: backupChecks[2].length });\n      if (backupChecks[3].length > 0) pending.push({ type: 'Sections', count: backupChecks[3].length });\n      if (backupChecks[4].length > 0) pending.push({ type: 'Tables', count: backupChecks[4].length });\n      if (backupChecks[5].length > 0) pending.push({ type: 'Staff', count: backupChecks[5].length });\n\n      setPendingBackups(pending);\n    } catch (error) {\n      toast.error('Error checking pending backups');\n      console.error(error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleBackup = async (type) => {\n    try {\n      let result;\n      switch (type) {\n        case 'Customers':\n          result = await customersCrud.syncToServer();\n          break;\n        case 'Menus':\n          result = await menusCrud.syncToServer();\n          break;\n        case 'Menu Categories':\n          result = await menuCategoryCrud.syncToServer();\n          break;\n        case 'Sections':\n          result = await sectionsCrud.syncToServer();\n          break;\n        case 'Tables':\n          result = await tablesCrud.syncToServer();\n          break;\n        case 'Staff':\n          result = await staffsCrud.syncToServer();\n          break;\n        default:\n          throw new Error('Invalid backup type');\n      }\n\n      if (result.returncode === 200) {\n        toast.success(`${type} backed up successfully`);\n        checkPendingBackups(); // Refresh the pending backups list\n      } else {\n        toast.error(result.message || `Failed to backup ${type}`);\n      }\n    } catch (error) {\n      toast.error(`Error backing up ${type}`);\n      console.error(error);\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-red-500\"></div>\n      </div>\n    );\n  }\n\n  if (pendingBackups.length === 0) {\n    return (\n      <div className=\"flex flex-col items-center justify-center min-h-screen\">\n        <CheckCircleIcon className=\"h-24 w-24 text-green-500 mb-4\" />\n        <h1 className=\"text-2xl font-bold text-gray-800 mb-2\">You're All Set!</h1>\n        <p className=\"text-gray-600\">All your data is backed up and synchronized</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-6\">\n      <h1 className=\"text-2xl font-bold mb-6\">Pending Backups</h1>\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n        {pendingBackups.map((backup, index) => (\n          <div\n            key={index}\n            onClick={() => handleBackup(backup.type)}\n            className=\"bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition-shadow duration-200\"\n          >\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h2 className=\"text-xl font-semibold text-gray-800\">{backup.type}</h2>\n                <p className=\"text-gray-600 mt-1\">\n                  {backup.count} {backup.count === 1 ? 'item' : 'items'} pending\n                </p>\n              </div>\n              <ArrowDownTrayIcon className=\"h-6 w-6 text-red-500\" />\n            </div>\n            <div className=\"mt-4 text-sm text-gray-500\">\n              Click to backup {backup.type.toLowerCase()}\n            </div>\n          </div>\n        ))}\n      </div>\n      <ToastContainer position=\"bottom-right\" />\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 279, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 290, "column": 0}, "map": {"version":3,"sources":["file:///home/batman/Workspace/Eatofy/node_modules/%40heroicons/react/24/outline/esm/ArrowDownTrayIcon.js"],"sourcesContent":["import * as React from \"react\";\nfunction ArrowDownTrayIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ArrowDownTrayIcon);\nexport default ForwardRef;"],"names":[],"mappings":";;;AAAA;;AACA,SAAS,kBAAkB,EACzB,KAAK,EACL,OAAO,EACP,GAAG,OACJ,EAAE,MAAM;IACP,OAAO,WAAW,GAAE,8JAAM,aAAa,CAAC,OAAO,OAAO,MAAM,CAAC;QAC3D,OAAO;QACP,MAAM;QACN,SAAS;QACT,aAAa;QACb,QAAQ;QACR,eAAe;QACf,aAAa;QACb,KAAK;QACL,mBAAmB;IACrB,GAAG,QAAQ,QAAQ,WAAW,GAAE,8JAAM,aAAa,CAAC,SAAS;QAC3D,IAAI;IACN,GAAG,SAAS,MAAM,WAAW,GAAE,8JAAM,aAAa,CAAC,QAAQ;QACzD,eAAe;QACf,gBAAgB;QAChB,GAAG;IACL;AACF;AACA,MAAM,aAAa,WAAW,GAAG,8JAAM,UAAU,CAAC;uCACnC","ignoreList":[0]}},
    {"offset": {"line": 316, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}